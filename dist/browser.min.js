parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"iJA9":[function(require,module,exports) {
var n=":::",t={name:"sha-1"},s={name:"AES-CBC",length:256},e={name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},a={production:"https://my.didww.com/public_keys",sandbox:"https://my-sandbox.didww.com/public_keys",staging:"https://my-staging.didww.com/public_keys",test:null,local:""};module.exports={SEPARATOR:n,FINGERPRINT_ALGO:t,SYM_ALGO:s,ASYM_ALGO:e,URLS:a};
},{}],"Focm":[function(require,module,exports) {
var n=require("./constants"),t=n.SEPARATOR,e=n.FINGERPRINT_ALGO,r=n.SYM_ALGO,u=n.ASYM_ALGO,o=n.URLS;function i(n){this.toString=function(){return n},this.toFile=function(t){return b(n,t||"file.enc","text/plain")},this.toArrayBuffer=function(){return h(n)}}function c(n){console&&console.error&&console.error(n)}function f(n){return fetch(n).then(function(n){return n.json()}).then(function(n){return[n.key_a,n.key_b]})}function a(n,t){var e=h(n);return crypto.subtle.digest.bind(crypto.subtle,t)(e).then(function(n){return p(n)})}function l(n){var r=n.map(function(n){return A(n)}),u=[];return a(atob(r[0]),e).then(function(n){return u.push(n)}).then(function(n){return a(atob(r[1]),e)}).then(function(n){return u.push(n)}).then(function(n){return u.join(t)})}function h(n){for(var t=new ArrayBuffer(n.length),e=new Uint8Array(t),r=0;r<n.length;r++)e[r]=n.charCodeAt(r);return t}function s(n){var t=n.match(/.{1,2}/g).map(function(n){return parseInt(n,16)});return new Uint8Array(t).buffer}function y(n){return new Uint8Array(n).reduce(function(n,t){return n+String.fromCharCode(t)},"")}function p(n){return new Uint8Array(n).reduce(function(n,t){var e=t.toString(16);return 1===e.length&&(e="0"+e),n+e},"")}var b=function(n,t,e){if(window&&window.navigator&&window.navigator.msSaveBlob){var r=new Blob([n],{type:e});return r.lastModifiedDate=new Date,r.name=t,r}return new File([n],t,{type:e,lastModified:new Date})};function w(n){return new Promise(function(t,e){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return e(r.error)},r.readAsDataURL(n)})}function d(){return crypto.subtle.generateKey(r,!0,["encrypt","decrypt"]).then(function(n){return crypto.subtle.exportKey("raw",n).then(function(n){return p(n)})})}function m(n,e){var u=s(n),o=crypto.getRandomValues(new Uint8Array(16)),i="0".repeat(16);return crypto.subtle.importKey("raw",u,{name:r.name},!1,["encrypt","decrypt"]).then(function(u){return crypto.subtle.encrypt({name:r.name,iv:o},u,h(e)).then(function(e){var r=btoa(i+y(e));return{key:[n,p(o.buffer)].join(t),content:r}})})}function A(n){return"\n"!==n[n.length-1]&&(n+="\n"),n.split("\n").slice(1,-2).join("")}function v(n,t){var e=A(n);return crypto.subtle.importKey("spki",h(atob(e)),u,!1,["encrypt"]).then(function(n){return crypto.subtle.encrypt({name:u.name,hash:u.hash},n,h(t)).then(function(n){return btoa(y(n))}).catch(function(n){return c("Failed to encrypt with RSA pubKey",n),null})}).catch(function(n){return c("Failed to import RSA pubKey",n),null})}function g(n){var e=this,r=n.environment,u=(n.url||o[r])+"/public_keys",c=null,a=null;"test"===r&&(c=n.publicKeys),this.getPublicKeys=function(){return c?new Promise(function(n){return n(c)}):f(u).then(function(n){return c=n})},this.getFingerprint=function(){return a?new Promise(function(n){return n(a)}):e.getPublicKeys().then(function(n){return l(n)}).then(function(n){return a=n})},this.clearCache=function(){c=null,a=null},this.encryptContent=function(n){var r=null,u=null,o=null,c=null,f=[];return e.getPublicKeys().then(function(n){return r=n}).then(function(n){return d().then(function(n){return u=n})}).then(function(t){return m(u,n).then(function(n){o=n.content,c=n.key})}).then(function(n){return v(r[0],c).then(function(n){return f.push(n)})}).then(function(n){return v(r[1],c).then(function(n){return f.push(n)})}).then(function(n){return new i(f.concat(o).join(t))})},this.encryptFile=function(n){return w(n).then(e.encryptContent)},this.encryptArrayBuffer=function(n){var t=y(n);return e.encryptContent(t)}}g.DidwwEncryptedFile=i,g.SYM_ALGO=r,g.ASYM_ALGO=u,module.exports=g;
},{"./constants":"iJA9"}],"hpaf":[function(require,module,exports) {
window.DidwwEncrypt=require("./index");
},{"./index":"Focm"}]},{},["hpaf"], null)
//# sourceMappingURL=/browser.min.js.map